donkey :
  container : /data/users/guillaume/Projects/TM5/images/tm5-intel-ubuntu20_v2.simg
  makedepf90 : ${.container} makedepf90
  build_cmd : ${.container} make -C ${build.directory} tm5.x
  run_cmd : singularity run -B /data -B /scratch ${.container} ${run.paths.output}/tm5.x 
  makefile : Makefile.singularity.ifort 
  paths :
    output : output
    build : build
    meteo : /data/projects/TM5/meteo
    meteo_out : /scratch/users/guillaume/TM5/meteo_out
    udunits : /opt/etc/udunits.dat
    diffusion : /scratch/users/guillaume/TM5/diffusion


run :
  start : 1 jan 2018
  end : 3 jan 2018
  paths :
    output : ${host.paths.output}
    meteo : ${host.paths.meteo}
    cf_table : ../data/cf-standard-name-table.xml
    udunits : ${host.paths.udunits}
    diffusion : ${host.paths.diffusion}
  meteo :
    coarsened : no
  regions : [glb600x400]
  run_cmd : ${host.run_cmd}


meteo :
  levels : tropo25
  path : ${host.paths.meteo}
  archive : swestore:TM5/meteo/
  coarsened : ${run.meteo.coarsened}
  output    : False
  regions : ${run.regions}
  output_path : ${host.paths.meteo_out}


build :
  directory : ${host.paths.build}
  paths :
    src :
      - ../src/base
      - ../src/proj/macros/tmm_tm5
      - ../src/proj/levels/ml137
      - ../src/proj/levels/ml137/tropo25a
      - ../src/proj/linalg/mkl
      - ../src/proj/openmp_speedups
      - ../src/proj/tracer/CO2
      - ../src/proj/era5_met
      - ../src/proj/output
      - ../src/proj/regions/glb6x4
      - ../src/dev
    remove__ : True
  macros : 
    mdf.inc : [with_go, with_netcdf4]
    tm5.inc : [slopes, without_wet_deposition, without_dry_deposition, without_photolysis, without_chemistry]
  makefile : ${host.makefile} 
  makedepf90 : ${host.makedepf90}
  build_cmd: ${host.build_cmd} 


regions :
  glb600x400 :
    name : glb600x400
    lons : [-180, 180, 6]
    lats : [-90, 90, 4]
    levels : tropo25